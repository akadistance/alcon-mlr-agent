{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\josep\\\\OneDrive\\\\Documents\\\\Jason\\\\EyeQ MLR Agent\\\\alcon-mlr-agent\\\\web-interface\\\\src\\\\components\\\\MessageBubble.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { CheckCircle, FileText, Copy, Check, RefreshCw, Share2, Download, Pencil, ThumbsUp, ThumbsDown } from 'lucide-react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport { TextShimmer } from './TextShimmer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MessageBubble = ({\n  message,\n  isLast,\n  onRegenerate,\n  onShare,\n  onExport,\n  onEdit,\n  isLastUserMessage = false,\n  conversationId = null\n}) => {\n  _s();\n  const {\n    type,\n    content,\n    analysis,\n    file,\n    isLoading,\n    isError\n  } = message;\n  const [copied, setCopied] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editValue, setEditValue] = useState(content || '');\n  const [feedback, setFeedback] = useState(null);\n  const [isSubmittingFeedback, setIsSubmittingFeedback] = useState(false);\n  const editRef = useRef(null);\n  const messageRef = useRef(null);\n\n  // Parse content to separate main text from references section\n  const parseContentAndReferences = text => {\n    if (!text) return {\n      mainContent: '',\n      referencesText: null\n    };\n\n    // Check for References section\n    const referencesMatch = text.match(/(?:^|\\n)(References?:[\\s\\S]*)$/i);\n    if (referencesMatch) {\n      const mainContent = text.substring(0, referencesMatch.index).trim();\n      const referencesText = referencesMatch[1];\n      return {\n        mainContent,\n        referencesText\n      };\n    }\n    return {\n      mainContent: text,\n      referencesText: null\n    };\n  };\n  const {\n    mainContent\n  } = type === 'assistant' ? parseContentAndReferences(content) : {\n    mainContent: content\n  };\n  const handleCopy = () => {\n    navigator.clipboard.writeText(content);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n  const handleFeedback = async feedbackType => {\n    if (type !== 'assistant' || isSubmittingFeedback) return;\n    setIsSubmittingFeedback(true);\n    setFeedback(feedbackType);\n    try {\n      const response = await fetch('/api/feedback', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message_id: message.id,\n          message_content: content,\n          feedback_type: feedbackType,\n          conversation_id: conversationId\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Failed to submit feedback');\n      }\n      console.log(`Feedback submitted: ${feedbackType} for conversation ${conversationId}`);\n    } catch (error) {\n      console.error('Error submitting feedback:', error);\n      setFeedback(null); // Reset on error\n    } finally {\n      setIsSubmittingFeedback(false);\n    }\n  };\n  const renderAnalysis = analysis => {\n    if (!analysis) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 space-y-3\",\n      children: [analysis.summary && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 bg-gray-50 dark:bg-zinc-800/50 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-sm font-semibold mb-2 text-gray-900 dark:text-white\",\n          children: \"Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-700 dark:text-gray-300\",\n          children: analysis.summary\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this), analysis.approved_claims && analysis.approved_claims.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"flex items-center gap-2 text-sm font-semibold mb-2 text-green-900 dark:text-green-300\",\n          children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this), \" Approved Claims\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"space-y-1 list-disc list-inside\",\n          children: analysis.approved_claims.map((claim, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"text-sm text-green-800 dark:text-green-200\",\n            children: claim\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this);\n  };\n  const startEdit = () => {\n    if (type !== 'user') return;\n    setEditValue(content || '');\n    setIsEditing(true);\n  };\n  const cancelEdit = () => {\n    setIsEditing(false);\n    setEditValue(content || '');\n  };\n  const saveEdit = () => {\n    if (onEdit && typeof onEdit === 'function') {\n      onEdit(editValue);\n    }\n    setIsEditing(false);\n  };\n\n  // Set initial height when editing starts\n  useEffect(() => {\n    if (isEditing && editRef.current) {\n      // Set cursor to end of text\n      editRef.current.focus();\n      editRef.current.selectionStart = editRef.current.value.length;\n      editRef.current.selectionEnd = editRef.current.value.length;\n    }\n  }, [isEditing]);\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex w-full justify-start animate-message-in\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-3xl w-full p-4\",\n        children: /*#__PURE__*/_jsxDEV(TextShimmer, {\n          className: \"text-base font-medium\",\n          children: \"EyeQ is thinking\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: messageRef,\n    className: `w-full group ${isError ? 'opacity-75' : ''}`,\n    children: [isEditing && type === 'user' ?\n    /*#__PURE__*/\n    // Expanded edit mode - full width like agent responses\n    _jsxDEV(\"div\", {\n      className: \"flex w-full justify-start\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-3xl w-full animate-message-in\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 sm:p-5 space-y-2 sm:space-y-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              ref: editRef,\n              className: \"w-full bg-[#002870] text-white rounded-lg p-3 border border-white/20 focus:ring-2 focus:ring-white/50 focus:border-transparent focus:outline-none resize-none text-sm leading-relaxed overflow-y-auto\",\n              style: {\n                minHeight: '100px',\n                maxHeight: '200px'\n              },\n              value: editValue,\n              onChange: e => setEditValue(e.target.value),\n              autoFocus: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-end gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"px-3 py-1.5 rounded-lg bg-white/10 text-white hover:bg-white/20 transition-colors text-sm font-medium\",\n                onClick: cancelEdit,\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"px-3 py-1.5 rounded-lg bg-white text-[#003595] hover:bg-white/90 transition-colors text-sm font-medium\",\n                onClick: saveEdit,\n                children: \"Send\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex w-full flex-wrap ${type === 'user' ? 'justify-end' : 'justify-start'}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `\n            transition-all duration-300\n            ${type === 'user' ? 'inline-flex max-w-[85%] rounded-2xl bg-gradient-to-br from-[#003595] to-[#1a4ba3] dark:bg-[#141414] text-white shadow-lg shadow-[#003595]/20 dark:shadow-[#1a1a1a]/50 hover:shadow-xl hover:shadow-[#003595]/30 dark:hover:shadow-[#222222]/50 hover:scale-[1.01] animate-message-in' : 'max-w-3xl w-full text-chatgpt-text-primary dark:text-chatgpt-dark-text-primary animate-message-in'}\n            ${isError ? 'bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800' : ''}\n          `,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${type === 'user' ? 'px-4 py-3' : 'p-4 sm:p-5'} space-y-2 sm:space-y-3`,\n          children: [type === 'user' && message.attachments && message.attachments.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2 mb-2\",\n            children: message.attachments.map(attachment => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"inline-flex flex-col p-3 bg-white dark:bg-[#1F2937] border border-[#E5E7EB] dark:border-[#4B5563] rounded-xl shadow-[0_2px_8px_rgba(0,0,0,0.05)] dark:shadow-[0_2px_8px_rgba(0,0,0,0.2)] max-w-md\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-shrink-0\",\n                  children: attachment.type === 'text' ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                    width: \"16\",\n                    height: \"16\",\n                    viewBox: \"0 0 20 20\",\n                    fill: \"none\",\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    className: \"text-[#6B7280] dark:text-[#9CA3AF]\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M2.94 2.94a1 1 0 0 1 1.02-.24l13.33 4.44a1 1 0 0 1 0 1.9L9.9 11.2a1 1 0 0 0-.7.7L7.04 17.29a1 1 0 0 1-1.9 0L.7 3.96a1 1 0 0 1 .24-1.02zm3.3 12.82l1.32-3.96a3 3 0 0 1 2.1-2.1l6.03-2-9.45-3.15 0 0 0 0L3.6 3.6l2.64 12.16z\",\n                      fill: \"currentColor\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 229,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 228,\n                    columnNumber: 25\n                  }, this) : attachment.type === 'file' ? /*#__PURE__*/_jsxDEV(FileText, {\n                    size: 16,\n                    className: \"text-[#6B7280] dark:text-[#9CA3AF]\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 232,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(FileText, {\n                    size: 16,\n                    className: \"text-[#6B7280] dark:text-[#9CA3AF]\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-[15px] font-medium text-[#1F2937] dark:text-[#F9FAFB]\",\n                  children: attachment.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-[12px] text-[#6B7280] dark:text-[#9CA3AF] mt-0.5\",\n                children: \"Attachment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 19\n              }, this)]\n            }, attachment.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), file && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex items-center gap-3 text-sm p-3 rounded-2xl ${type === 'user' ? 'bg-white/20 text-white' : 'bg-chatgpt-bg-secondary dark:bg-chatgpt-dark-bg-secondary'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `p-1.5 rounded-lg ${type === 'user' ? 'bg-white/20' : 'bg-alcon-blue/10'}`,\n              children: /*#__PURE__*/_jsxDEV(FileText, {\n                size: 16,\n                className: type === 'user' ? 'text-white' : 'text-alcon-blue'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `font-medium ${type === 'user' ? 'text-white' : 'text-chatgpt-text-primary dark:text-chatgpt-dark-text-primary'}`,\n              children: [\"Uploaded: \", file.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: type === 'user' ? !isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"leading-relaxed\",\n              children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                remarkPlugins: [remarkGfm],\n                children: content || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"prose prose-sm dark:prose-invert max-w-none text-base leading-relaxed prose-headings:text-base prose-headings:font-semibold prose-headings:mt-4 prose-headings:mb-2 prose-p:my-2 prose-ul:my-2 prose-ol:my-2 prose-li:my-1 select-text\",\n              style: {\n                userSelect: 'text',\n                WebkitUserSelect: 'text',\n                lineHeight: '1.7'\n              },\n              children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                remarkPlugins: [remarkGfm],\n                children: mainContent || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 11\n          }, this), analysis && renderAnalysis(analysis), type === 'assistant' && !isLoading && !isError && !message.isStreaming && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2 items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-1 mr-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: `p-2 rounded-xl transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center ${feedback === 'liked' ? 'bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400' : 'hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary'}`,\n                onClick: () => handleFeedback('liked'),\n                disabled: isSubmittingFeedback,\n                title: \"Good response\",\n                \"aria-label\": \"Like this response\",\n                children: /*#__PURE__*/_jsxDEV(ThumbsUp, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `p-2 rounded-xl transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center ${feedback === 'disliked' ? 'bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400' : 'hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary'}`,\n                onClick: () => handleFeedback('disliked'),\n                disabled: isSubmittingFeedback,\n                title: \"Poor response\",\n                \"aria-label\": \"Dislike this response\",\n                children: /*#__PURE__*/_jsxDEV(ThumbsDown, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"p-2 rounded-xl hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center\",\n              onClick: handleCopy,\n              title: copied ? 'Copied!' : 'Copy',\n              \"aria-label\": \"Copy message\",\n              children: copied ? /*#__PURE__*/_jsxDEV(Check, {\n                size: 14,\n                className: \"text-alcon-blue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 27\n              }, this) : /*#__PURE__*/_jsxDEV(Copy, {\n                size: 14,\n                className: \"text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 77\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this), isLast && onRegenerate && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"p-2 rounded-xl hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center\",\n              onClick: onRegenerate,\n              title: \"Regenerate response\",\n              \"aria-label\": \"Regenerate response\",\n              children: /*#__PURE__*/_jsxDEV(RefreshCw, {\n                size: 14,\n                className: \"text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 17\n            }, this), onShare && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"p-2 rounded-xl hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center\",\n              onClick: () => onShare(message),\n              title: \"Share conversation\",\n              \"aria-label\": \"Share conversation\",\n              children: /*#__PURE__*/_jsxDEV(Share2, {\n                size: 14,\n                className: \"text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 17\n            }, this), onExport && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"p-2 rounded-xl hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center\",\n              onClick: () => onExport('markdown'),\n              title: \"Export conversation\",\n              \"aria-label\": \"Export conversation\",\n              children: /*#__PURE__*/_jsxDEV(Download, {\n                size: 14,\n                className: \"text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }, this), type === 'user' && !isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"basis-full flex justify-end gap-2 mt-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"p-2 rounded-xl hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center\",\n        onClick: handleCopy,\n        title: copied ? 'Copied!' : 'Copy',\n        \"aria-label\": \"Copy message\",\n        children: copied ? /*#__PURE__*/_jsxDEV(Check, {\n          size: 14,\n          className: \"text-alcon-blue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 23\n        }, this) : /*#__PURE__*/_jsxDEV(Copy, {\n          size: 14,\n          className: \"text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 73\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 11\n      }, this), isLastUserMessage && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"p-2 rounded-xl hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center\",\n        onClick: startEdit,\n        title: \"Edit message\",\n        \"aria-label\": \"Edit message\",\n        children: /*#__PURE__*/_jsxDEV(Pencil, {\n          size: 14,\n          className: \"text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 5\n  }, this);\n};\n_s(MessageBubble, \"M6DIz9I4twQWibulsV4zDxlxr3M=\");\n_c = MessageBubble;\nexport default MessageBubble;\nvar _c;\n$RefreshReg$(_c, \"MessageBubble\");","map":{"version":3,"names":["React","useState","useRef","useEffect","CheckCircle","FileText","Copy","Check","RefreshCw","Share2","Download","Pencil","ThumbsUp","ThumbsDown","ReactMarkdown","remarkGfm","TextShimmer","jsxDEV","_jsxDEV","MessageBubble","message","isLast","onRegenerate","onShare","onExport","onEdit","isLastUserMessage","conversationId","_s","type","content","analysis","file","isLoading","isError","copied","setCopied","isEditing","setIsEditing","editValue","setEditValue","feedback","setFeedback","isSubmittingFeedback","setIsSubmittingFeedback","editRef","messageRef","parseContentAndReferences","text","mainContent","referencesText","referencesMatch","match","substring","index","trim","handleCopy","navigator","clipboard","writeText","setTimeout","handleFeedback","feedbackType","response","fetch","method","headers","body","JSON","stringify","message_id","id","message_content","feedback_type","conversation_id","ok","Error","console","log","error","renderAnalysis","className","children","summary","fileName","_jsxFileName","lineNumber","columnNumber","approved_claims","length","size","map","claim","startEdit","cancelEdit","saveEdit","current","focus","selectionStart","value","selectionEnd","ref","style","minHeight","maxHeight","onChange","e","target","autoFocus","onClick","attachments","attachment","width","height","viewBox","fill","xmlns","d","title","name","remarkPlugins","userSelect","WebkitUserSelect","lineHeight","isStreaming","disabled","_c","$RefreshReg$"],"sources":["C:/Users/josep/OneDrive/Documents/Jason/EyeQ MLR Agent/alcon-mlr-agent/web-interface/src/components/MessageBubble.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { CheckCircle, FileText, Copy, Check, RefreshCw, Share2, Download, Pencil, ThumbsUp, ThumbsDown } from 'lucide-react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport { Message, Analysis } from '../types';\nimport { TextShimmer } from './TextShimmer';\n\ninterface MessageBubbleProps {\n  message: Message;\n  isLast: boolean;\n  onRegenerate?: () => void;\n  onShare?: (message: Message) => void;\n  onExport?: (format: string) => void;\n  editable?: boolean;\n  onEdit?: (newText: string) => void;\n  isLastUserMessage?: boolean;\n  conversationId?: string | null;\n}\n\ninterface ParsedContent {\n  mainContent: string;\n  referencesText: string | null;\n}\n\nconst MessageBubble: React.FC<MessageBubbleProps> = ({\n  message,\n  isLast,\n  onRegenerate,\n  onShare,\n  onExport,\n  onEdit,\n  isLastUserMessage = false,\n  conversationId = null\n}) => {\n  const { type, content, analysis, file, isLoading, isError } = message;\n  const [copied, setCopied] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editValue, setEditValue] = useState(content || '');\n  const [feedback, setFeedback] = useState<'liked' | 'disliked' | null>(null);\n  const [isSubmittingFeedback, setIsSubmittingFeedback] = useState(false);\n  const editRef = useRef<HTMLTextAreaElement>(null);\n  const messageRef = useRef<HTMLDivElement>(null);\n  \n  // Parse content to separate main text from references section\n  const parseContentAndReferences = (text: string): ParsedContent => {\n    if (!text) return { mainContent: '', referencesText: null };\n    \n    // Check for References section\n    const referencesMatch = text.match(/(?:^|\\n)(References?:[\\s\\S]*)$/i);\n    \n    if (referencesMatch) {\n      const mainContent = text.substring(0, referencesMatch.index!).trim();\n      const referencesText = referencesMatch[1];\n      return { mainContent, referencesText };\n    }\n    \n    return { mainContent: text, referencesText: null };\n  };\n  \n  const { mainContent } = type === 'assistant' \n    ? parseContentAndReferences(content) \n    : { mainContent: content };\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(content);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  const handleFeedback = async (feedbackType: 'liked' | 'disliked') => {\n    if (type !== 'assistant' || isSubmittingFeedback) return;\n    \n    setIsSubmittingFeedback(true);\n    setFeedback(feedbackType);\n    \n    try {\n      const response = await fetch('/api/feedback', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          message_id: message.id,\n          message_content: content,\n          feedback_type: feedbackType,\n          conversation_id: conversationId\n        })\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to submit feedback');\n      }\n      \n      console.log(`Feedback submitted: ${feedbackType} for conversation ${conversationId}`);\n    } catch (error) {\n      console.error('Error submitting feedback:', error);\n      setFeedback(null); // Reset on error\n    } finally {\n      setIsSubmittingFeedback(false);\n    }\n  };\n\n  const renderAnalysis = (analysis: Analysis) => {\n    if (!analysis) return null;\n\n    return (\n      <div className=\"mt-4 space-y-3\">\n        {analysis.summary && (\n          <div className=\"p-4 bg-gray-50 dark:bg-zinc-800/50 rounded-lg\">\n            <h4 className=\"text-sm font-semibold mb-2 text-gray-900 dark:text-white\">Summary</h4>\n            <p className=\"text-sm text-gray-700 dark:text-gray-300\">{analysis.summary}</p>\n          </div>\n        )}\n\n        {analysis.approved_claims && analysis.approved_claims.length > 0 && (\n          <div className=\"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg\">\n            <h4 className=\"flex items-center gap-2 text-sm font-semibold mb-2 text-green-900 dark:text-green-300\">\n              <CheckCircle size={16} /> Approved Claims\n            </h4>\n            <ul className=\"space-y-1 list-disc list-inside\">\n              {analysis.approved_claims.map((claim, index) => (\n                <li key={index} className=\"text-sm text-green-800 dark:text-green-200\">{claim}</li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const startEdit = () => {\n    if (type !== 'user') return;\n    setEditValue(content || '');\n    setIsEditing(true);\n  };\n\n  const cancelEdit = () => {\n    setIsEditing(false);\n    setEditValue(content || '');\n  };\n\n  const saveEdit = () => {\n    if (onEdit && typeof onEdit === 'function') {\n      onEdit(editValue);\n    }\n    setIsEditing(false);\n  };\n\n  // Set initial height when editing starts\n  useEffect(() => {\n    if (isEditing && editRef.current) {\n      // Set cursor to end of text\n      editRef.current.focus();\n      editRef.current.selectionStart = editRef.current.value.length;\n      editRef.current.selectionEnd = editRef.current.value.length;\n    }\n  }, [isEditing]);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex w-full justify-start animate-message-in\">\n        <div className=\"max-w-3xl w-full p-4\">\n          <TextShimmer className=\"text-base font-medium\">\n            EyeQ is thinking\n          </TextShimmer>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div \n      ref={messageRef}\n      className={`w-full group ${isError ? 'opacity-75' : ''}`}\n    >\n      {isEditing && type === 'user' ? (\n        // Expanded edit mode - full width like agent responses\n        <div className=\"flex w-full justify-start\">\n          <div className=\"max-w-3xl w-full animate-message-in\">\n            <div className=\"p-4 sm:p-5 space-y-2 sm:space-y-3\">\n              <div className=\"space-y-2\">\n                <textarea\n                  ref={editRef}\n                  className=\"w-full bg-[#002870] text-white rounded-lg p-3 border border-white/20 focus:ring-2 focus:ring-white/50 focus:border-transparent focus:outline-none resize-none text-sm leading-relaxed overflow-y-auto\"\n                  style={{ minHeight: '100px', maxHeight: '200px' }}\n                  value={editValue}\n                  onChange={(e) => setEditValue(e.target.value)}\n                  autoFocus\n                />\n                <div className=\"flex justify-end gap-2\">\n                  <button \n                    className=\"px-3 py-1.5 rounded-lg bg-white/10 text-white hover:bg-white/20 transition-colors text-sm font-medium\"\n                    onClick={cancelEdit}\n                  >\n                    Cancel\n                  </button>\n                  <button \n                    className=\"px-3 py-1.5 rounded-lg bg-white text-[#003595] hover:bg-white/90 transition-colors text-sm font-medium\"\n                    onClick={saveEdit}\n                  >\n                    Send\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : (\n        <div className={`flex w-full flex-wrap ${type === 'user' ? 'justify-end' : 'justify-start'}`}>\n          \n          <div className={`\n            transition-all duration-300\n            ${type === 'user' \n              ? 'inline-flex max-w-[85%] rounded-2xl bg-gradient-to-br from-[#003595] to-[#1a4ba3] dark:bg-[#141414] text-white shadow-lg shadow-[#003595]/20 dark:shadow-[#1a1a1a]/50 hover:shadow-xl hover:shadow-[#003595]/30 dark:hover:shadow-[#222222]/50 hover:scale-[1.01] animate-message-in' \n              : 'max-w-3xl w-full text-chatgpt-text-primary dark:text-chatgpt-dark-text-primary animate-message-in'}\n            ${isError ? 'bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800' : ''}\n          `}>\n          <div className={`${type === 'user' ? 'px-4 py-3' : 'p-4 sm:p-5'} space-y-2 sm:space-y-3`}>\n          {/* Render attachments as clean cards (ChatGPT style) - Only for user messages */}\n          {type === 'user' && message.attachments && message.attachments.length > 0 && (\n            <div className=\"space-y-2 mb-2\">\n              {message.attachments.map((attachment) => (\n                <div \n                  key={attachment.id}\n                  className=\"inline-flex flex-col p-3 bg-white dark:bg-[#1F2937] border border-[#E5E7EB] dark:border-[#4B5563] rounded-xl shadow-[0_2px_8px_rgba(0,0,0,0.05)] dark:shadow-[0_2px_8px_rgba(0,0,0,0.2)] max-w-md\"\n                >\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"flex-shrink-0\">\n                      {attachment.type === 'text' ? (\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" className=\"text-[#6B7280] dark:text-[#9CA3AF]\">\n                          <path d=\"M2.94 2.94a1 1 0 0 1 1.02-.24l13.33 4.44a1 1 0 0 1 0 1.9L9.9 11.2a1 1 0 0 0-.7.7L7.04 17.29a1 1 0 0 1-1.9 0L.7 3.96a1 1 0 0 1 .24-1.02zm3.3 12.82l1.32-3.96a3 3 0 0 1 2.1-2.1l6.03-2-9.45-3.15 0 0 0 0L3.6 3.6l2.64 12.16z\" fill=\"currentColor\"></path>\n                        </svg>\n                      ) : attachment.type === 'file' ? (\n                        <FileText size={16} className=\"text-[#6B7280] dark:text-[#9CA3AF]\" />\n                      ) : (\n                        <FileText size={16} className=\"text-[#6B7280] dark:text-[#9CA3AF]\" />\n                      )}\n                    </div>\n                    <span className=\"text-[15px] font-medium text-[#1F2937] dark:text-[#F9FAFB]\">\n                      {attachment.title}\n                    </span>\n                  </div>\n                  <span className=\"text-[12px] text-[#6B7280] dark:text-[#9CA3AF] mt-0.5\">\n                    Attachment\n                  </span>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {file && (\n            <div className={`flex items-center gap-3 text-sm p-3 rounded-2xl ${\n              type === 'user' \n                ? 'bg-white/20 text-white' \n                : 'bg-chatgpt-bg-secondary dark:bg-chatgpt-dark-bg-secondary'\n            }`}>\n              <div className={`p-1.5 rounded-lg ${type === 'user' ? 'bg-white/20' : 'bg-alcon-blue/10'}`}>\n                <FileText size={16} className={type === 'user' ? 'text-white' : 'text-alcon-blue'} />\n              </div>\n              <span className={`font-medium ${type === 'user' ? 'text-white' : 'text-chatgpt-text-primary dark:text-chatgpt-dark-text-primary'}`}>Uploaded: {file.name}</span>\n            </div>\n          )}\n\n          <div>\n            {type === 'user' ? (\n              !isEditing && (\n                <div className=\"leading-relaxed\">\n                  <ReactMarkdown remarkPlugins={[remarkGfm]}>\n                    {content || ''}\n                  </ReactMarkdown>\n                </div>\n              )\n            ) : (\n              <div \n                className=\"prose prose-sm dark:prose-invert max-w-none text-base leading-relaxed prose-headings:text-base prose-headings:font-semibold prose-headings:mt-4 prose-headings:mb-2 prose-p:my-2 prose-ul:my-2 prose-ol:my-2 prose-li:my-1 select-text\"\n                style={{ userSelect: 'text', WebkitUserSelect: 'text', lineHeight: '1.7' }}\n              >\n                <ReactMarkdown remarkPlugins={[remarkGfm]}>\n                  {mainContent || ''}\n                </ReactMarkdown>\n              </div>\n            )}\n          </div>\n\n\n          {analysis && renderAnalysis(analysis)}\n\n          {/* Action buttons for assistant messages - only show after streaming completes */}\n          {type === 'assistant' && !isLoading && !isError && !message.isStreaming && (\n            <div className=\"flex gap-2 items-center\">\n              {/* Feedback buttons */}\n              <div className=\"flex gap-1 mr-1\">\n                <button\n                  className={`p-2 rounded-xl transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center ${\n                    feedback === 'liked'\n                      ? 'bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400'\n                      : 'hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary'\n                  }`}\n                  onClick={() => handleFeedback('liked')}\n                  disabled={isSubmittingFeedback}\n                  title=\"Good response\"\n                  aria-label=\"Like this response\"\n                >\n                  <ThumbsUp size={14} />\n                </button>\n                <button\n                  className={`p-2 rounded-xl transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center ${\n                    feedback === 'disliked'\n                      ? 'bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400'\n                      : 'hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary'\n                  }`}\n                  onClick={() => handleFeedback('disliked')}\n                  disabled={isSubmittingFeedback}\n                  title=\"Poor response\"\n                  aria-label=\"Dislike this response\"\n                >\n                  <ThumbsDown size={14} />\n                </button>\n              </div>\n              \n              <button \n                className=\"p-2 rounded-xl hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center\" \n                onClick={handleCopy}\n                title={copied ? 'Copied!' : 'Copy'}\n                aria-label=\"Copy message\"\n              >\n                {copied ? <Check size={14} className=\"text-alcon-blue\" /> : <Copy size={14} className=\"text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary\" />}\n              </button>\n              \n              {isLast && onRegenerate && (\n                <button \n                  className=\"p-2 rounded-xl hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center\" \n                  onClick={onRegenerate}\n                  title=\"Regenerate response\"\n                  aria-label=\"Regenerate response\"\n                >\n                  <RefreshCw size={14} className=\"text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary\" />\n                </button>\n              )}\n\n              {onShare && (\n                <button\n                  className=\"p-2 rounded-xl hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center\"\n                  onClick={() => onShare(message)}\n                  title=\"Share conversation\"\n                  aria-label=\"Share conversation\"\n                >\n                  <Share2 size={14} className=\"text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary\" />\n                </button>\n              )}\n\n              {onExport && (\n                <button\n                  className=\"p-2 rounded-xl hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center\"\n                  onClick={() => onExport('markdown')}\n                  title=\"Export conversation\"\n                  aria-label=\"Export conversation\"\n                >\n                  <Download size={14} className=\"text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary\" />\n                </button>\n              )}\n            </div>\n          )}\n          </div>\n        </div>\n      </div>\n      )}\n\n      {/* User action buttons row under the bubble */}\n      {type === 'user' && !isEditing && (\n        <div className=\"basis-full flex justify-end gap-2 mt-2\">\n          <button\n            className=\"p-2 rounded-xl hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center\"\n            onClick={handleCopy}\n            title={copied ? 'Copied!' : 'Copy'}\n            aria-label=\"Copy message\"\n          >\n            {copied ? <Check size={14} className=\"text-alcon-blue\" /> : <Copy size={14} className=\"text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary\" />}\n          </button>\n          {isLastUserMessage && (\n            <button\n              className=\"p-2 rounded-xl hover:bg-chatgpt-bg-secondary dark:hover:bg-chatgpt-dark-bg-secondary transition-all duration-200 hover:scale-105 active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center\"\n              onClick={startEdit}\n              title=\"Edit message\"\n              aria-label=\"Edit message\"\n            >\n              <Pencil size={14} className=\"text-chatgpt-text-secondary dark:text-chatgpt-dark-text-secondary\" />\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MessageBubble;\n\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAC1D,SAASC,WAAW,EAAEC,QAAQ,EAAEC,IAAI,EAAEC,KAAK,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,cAAc;AAC5H,OAAOC,aAAa,MAAM,gBAAgB;AAC1C,OAAOC,SAAS,MAAM,YAAY;AAElC,SAASC,WAAW,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAmB5C,MAAMC,aAA2C,GAAGA,CAAC;EACnDC,OAAO;EACPC,MAAM;EACNC,YAAY;EACZC,OAAO;EACPC,QAAQ;EACRC,MAAM;EACNC,iBAAiB,GAAG,KAAK;EACzBC,cAAc,GAAG;AACnB,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAM;IAAEC,IAAI;IAAEC,OAAO;IAAEC,QAAQ;IAAEC,IAAI;IAAEC,SAAS;IAAEC;EAAQ,CAAC,GAAGd,OAAO;EACrE,MAAM,CAACe,MAAM,EAAEC,SAAS,CAAC,GAAGnC,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAACoC,SAAS,EAAEC,YAAY,CAAC,GAAGrC,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACsC,SAAS,EAAEC,YAAY,CAAC,GAAGvC,QAAQ,CAAC6B,OAAO,IAAI,EAAE,CAAC;EACzD,MAAM,CAACW,QAAQ,EAAEC,WAAW,CAAC,GAAGzC,QAAQ,CAA8B,IAAI,CAAC;EAC3E,MAAM,CAAC0C,oBAAoB,EAAEC,uBAAuB,CAAC,GAAG3C,QAAQ,CAAC,KAAK,CAAC;EACvE,MAAM4C,OAAO,GAAG3C,MAAM,CAAsB,IAAI,CAAC;EACjD,MAAM4C,UAAU,GAAG5C,MAAM,CAAiB,IAAI,CAAC;;EAE/C;EACA,MAAM6C,yBAAyB,GAAIC,IAAY,IAAoB;IACjE,IAAI,CAACA,IAAI,EAAE,OAAO;MAAEC,WAAW,EAAE,EAAE;MAAEC,cAAc,EAAE;IAAK,CAAC;;IAE3D;IACA,MAAMC,eAAe,GAAGH,IAAI,CAACI,KAAK,CAAC,iCAAiC,CAAC;IAErE,IAAID,eAAe,EAAE;MACnB,MAAMF,WAAW,GAAGD,IAAI,CAACK,SAAS,CAAC,CAAC,EAAEF,eAAe,CAACG,KAAM,CAAC,CAACC,IAAI,CAAC,CAAC;MACpE,MAAML,cAAc,GAAGC,eAAe,CAAC,CAAC,CAAC;MACzC,OAAO;QAAEF,WAAW;QAAEC;MAAe,CAAC;IACxC;IAEA,OAAO;MAAED,WAAW,EAAED,IAAI;MAAEE,cAAc,EAAE;IAAK,CAAC;EACpD,CAAC;EAED,MAAM;IAAED;EAAY,CAAC,GAAGpB,IAAI,KAAK,WAAW,GACxCkB,yBAAyB,CAACjB,OAAO,CAAC,GAClC;IAAEmB,WAAW,EAAEnB;EAAQ,CAAC;EAE5B,MAAM0B,UAAU,GAAGA,CAAA,KAAM;IACvBC,SAAS,CAACC,SAAS,CAACC,SAAS,CAAC7B,OAAO,CAAC;IACtCM,SAAS,CAAC,IAAI,CAAC;IACfwB,UAAU,CAAC,MAAMxB,SAAS,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;EAC1C,CAAC;EAED,MAAMyB,cAAc,GAAG,MAAOC,YAAkC,IAAK;IACnE,IAAIjC,IAAI,KAAK,WAAW,IAAIc,oBAAoB,EAAE;IAElDC,uBAAuB,CAAC,IAAI,CAAC;IAC7BF,WAAW,CAACoB,YAAY,CAAC;IAEzB,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,eAAe,EAAE;QAC5CC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBC,UAAU,EAAElD,OAAO,CAACmD,EAAE;UACtBC,eAAe,EAAE1C,OAAO;UACxB2C,aAAa,EAAEX,YAAY;UAC3BY,eAAe,EAAE/C;QACnB,CAAC;MACH,CAAC,CAAC;MAEF,IAAI,CAACoC,QAAQ,CAACY,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;MAC9C;MAEAC,OAAO,CAACC,GAAG,CAAC,uBAAuBhB,YAAY,qBAAqBnC,cAAc,EAAE,CAAC;IACvF,CAAC,CAAC,OAAOoD,KAAK,EAAE;MACdF,OAAO,CAACE,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MAClDrC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;IACrB,CAAC,SAAS;MACRE,uBAAuB,CAAC,KAAK,CAAC;IAChC;EACF,CAAC;EAED,MAAMoC,cAAc,GAAIjD,QAAkB,IAAK;IAC7C,IAAI,CAACA,QAAQ,EAAE,OAAO,IAAI;IAE1B,oBACEb,OAAA;MAAK+D,SAAS,EAAC,gBAAgB;MAAAC,QAAA,GAC5BnD,QAAQ,CAACoD,OAAO,iBACfjE,OAAA;QAAK+D,SAAS,EAAC,+CAA+C;QAAAC,QAAA,gBAC5DhE,OAAA;UAAI+D,SAAS,EAAC,0DAA0D;UAAAC,QAAA,EAAC;QAAO;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACrFrE,OAAA;UAAG+D,SAAS,EAAC,0CAA0C;UAAAC,QAAA,EAAEnD,QAAQ,CAACoD;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3E,CACN,EAEAxD,QAAQ,CAACyD,eAAe,IAAIzD,QAAQ,CAACyD,eAAe,CAACC,MAAM,GAAG,CAAC,iBAC9DvE,OAAA;QAAK+D,SAAS,EAAC,iDAAiD;QAAAC,QAAA,gBAC9DhE,OAAA;UAAI+D,SAAS,EAAC,uFAAuF;UAAAC,QAAA,gBACnGhE,OAAA,CAACd,WAAW;YAACsF,IAAI,EAAE;UAAG;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,oBAC3B;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACLrE,OAAA;UAAI+D,SAAS,EAAC,iCAAiC;UAAAC,QAAA,EAC5CnD,QAAQ,CAACyD,eAAe,CAACG,GAAG,CAAC,CAACC,KAAK,EAAEtC,KAAK,kBACzCpC,OAAA;YAAgB+D,SAAS,EAAC,4CAA4C;YAAAC,QAAA,EAAEU;UAAK,GAApEtC,KAAK;YAAA8B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAoE,CACnF;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAEV,CAAC;EAED,MAAMM,SAAS,GAAGA,CAAA,KAAM;IACtB,IAAIhE,IAAI,KAAK,MAAM,EAAE;IACrBW,YAAY,CAACV,OAAO,IAAI,EAAE,CAAC;IAC3BQ,YAAY,CAAC,IAAI,CAAC;EACpB,CAAC;EAED,MAAMwD,UAAU,GAAGA,CAAA,KAAM;IACvBxD,YAAY,CAAC,KAAK,CAAC;IACnBE,YAAY,CAACV,OAAO,IAAI,EAAE,CAAC;EAC7B,CAAC;EAED,MAAMiE,QAAQ,GAAGA,CAAA,KAAM;IACrB,IAAItE,MAAM,IAAI,OAAOA,MAAM,KAAK,UAAU,EAAE;MAC1CA,MAAM,CAACc,SAAS,CAAC;IACnB;IACAD,YAAY,CAAC,KAAK,CAAC;EACrB,CAAC;;EAED;EACAnC,SAAS,CAAC,MAAM;IACd,IAAIkC,SAAS,IAAIQ,OAAO,CAACmD,OAAO,EAAE;MAChC;MACAnD,OAAO,CAACmD,OAAO,CAACC,KAAK,CAAC,CAAC;MACvBpD,OAAO,CAACmD,OAAO,CAACE,cAAc,GAAGrD,OAAO,CAACmD,OAAO,CAACG,KAAK,CAACV,MAAM;MAC7D5C,OAAO,CAACmD,OAAO,CAACI,YAAY,GAAGvD,OAAO,CAACmD,OAAO,CAACG,KAAK,CAACV,MAAM;IAC7D;EACF,CAAC,EAAE,CAACpD,SAAS,CAAC,CAAC;EAEf,IAAIJ,SAAS,EAAE;IACb,oBACEf,OAAA;MAAK+D,SAAS,EAAC,8CAA8C;MAAAC,QAAA,eAC3DhE,OAAA;QAAK+D,SAAS,EAAC,sBAAsB;QAAAC,QAAA,eACnChE,OAAA,CAACF,WAAW;UAACiE,SAAS,EAAC,uBAAuB;UAAAC,QAAA,EAAC;QAE/C;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAa;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACX;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,oBACErE,OAAA;IACEmF,GAAG,EAAEvD,UAAW;IAChBmC,SAAS,EAAE,gBAAgB/C,OAAO,GAAG,YAAY,GAAG,EAAE,EAAG;IAAAgD,QAAA,GAExD7C,SAAS,IAAIR,IAAI,KAAK,MAAM;IAAA;IAC3B;IACAX,OAAA;MAAK+D,SAAS,EAAC,2BAA2B;MAAAC,QAAA,eACxChE,OAAA;QAAK+D,SAAS,EAAC,qCAAqC;QAAAC,QAAA,eAClDhE,OAAA;UAAK+D,SAAS,EAAC,mCAAmC;UAAAC,QAAA,eAChDhE,OAAA;YAAK+D,SAAS,EAAC,WAAW;YAAAC,QAAA,gBACxBhE,OAAA;cACEmF,GAAG,EAAExD,OAAQ;cACboC,SAAS,EAAC,uMAAuM;cACjNqB,KAAK,EAAE;gBAAEC,SAAS,EAAE,OAAO;gBAAEC,SAAS,EAAE;cAAQ,CAAE;cAClDL,KAAK,EAAE5D,SAAU;cACjBkE,QAAQ,EAAGC,CAAC,IAAKlE,YAAY,CAACkE,CAAC,CAACC,MAAM,CAACR,KAAK,CAAE;cAC9CS,SAAS;YAAA;cAAAxB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC,eACFrE,OAAA;cAAK+D,SAAS,EAAC,wBAAwB;cAAAC,QAAA,gBACrChE,OAAA;gBACE+D,SAAS,EAAC,uGAAuG;gBACjH4B,OAAO,EAAEf,UAAW;gBAAAZ,QAAA,EACrB;cAED;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTrE,OAAA;gBACE+D,SAAS,EAAC,wGAAwG;gBAClH4B,OAAO,EAAEd,QAAS;gBAAAb,QAAA,EACnB;cAED;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,gBAENrE,OAAA;MAAK+D,SAAS,EAAE,yBAAyBpD,IAAI,KAAK,MAAM,GAAG,aAAa,GAAG,eAAe,EAAG;MAAAqD,QAAA,eAE3FhE,OAAA;QAAK+D,SAAS,EAAE;AAC1B;AACA,cAAcpD,IAAI,KAAK,MAAM,GACb,sRAAsR,GACtR,mGAAmG;AACnH,cAAcK,OAAO,GAAG,wEAAwE,GAAG,EAAE;AACrG,WAAY;QAAAgD,QAAA,eACFhE,OAAA;UAAK+D,SAAS,EAAE,GAAGpD,IAAI,KAAK,MAAM,GAAG,WAAW,GAAG,YAAY,yBAA0B;UAAAqD,QAAA,GAExFrD,IAAI,KAAK,MAAM,IAAIT,OAAO,CAAC0F,WAAW,IAAI1F,OAAO,CAAC0F,WAAW,CAACrB,MAAM,GAAG,CAAC,iBACvEvE,OAAA;YAAK+D,SAAS,EAAC,gBAAgB;YAAAC,QAAA,EAC5B9D,OAAO,CAAC0F,WAAW,CAACnB,GAAG,CAAEoB,UAAU,iBAClC7F,OAAA;cAEE+D,SAAS,EAAC,mMAAmM;cAAAC,QAAA,gBAE7MhE,OAAA;gBAAK+D,SAAS,EAAC,yBAAyB;gBAAAC,QAAA,gBACtChE,OAAA;kBAAK+D,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAC3B6B,UAAU,CAAClF,IAAI,KAAK,MAAM,gBACzBX,OAAA;oBAAK8F,KAAK,EAAC,IAAI;oBAACC,MAAM,EAAC,IAAI;oBAACC,OAAO,EAAC,WAAW;oBAACC,IAAI,EAAC,MAAM;oBAACC,KAAK,EAAC,4BAA4B;oBAACnC,SAAS,EAAC,oCAAoC;oBAAAC,QAAA,eAC3IhE,OAAA;sBAAMmG,CAAC,EAAC,4NAA4N;sBAACF,IAAI,EAAC;oBAAc;sBAAA/B,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC7P,CAAC,GACJwB,UAAU,CAAClF,IAAI,KAAK,MAAM,gBAC5BX,OAAA,CAACb,QAAQ;oBAACqF,IAAI,EAAE,EAAG;oBAACT,SAAS,EAAC;kBAAoC;oBAAAG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,gBAErErE,OAAA,CAACb,QAAQ;oBAACqF,IAAI,EAAE,EAAG;oBAACT,SAAS,EAAC;kBAAoC;oBAAAG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBACrE;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE,CAAC,eACNrE,OAAA;kBAAM+D,SAAS,EAAC,4DAA4D;kBAAAC,QAAA,EACzE6B,UAAU,CAACO;gBAAK;kBAAAlC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACb,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CAAC,eACNrE,OAAA;gBAAM+D,SAAS,EAAC,uDAAuD;gBAAAC,QAAA,EAAC;cAExE;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA,GArBFwB,UAAU,CAACxC,EAAE;cAAAa,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAsBf,CACN;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CACN,EAEAvD,IAAI,iBACHd,OAAA;YAAK+D,SAAS,EAAE,mDACdpD,IAAI,KAAK,MAAM,GACX,wBAAwB,GACxB,2DAA2D,EAC9D;YAAAqD,QAAA,gBACDhE,OAAA;cAAK+D,SAAS,EAAE,oBAAoBpD,IAAI,KAAK,MAAM,GAAG,aAAa,GAAG,kBAAkB,EAAG;cAAAqD,QAAA,eACzFhE,OAAA,CAACb,QAAQ;gBAACqF,IAAI,EAAE,EAAG;gBAACT,SAAS,EAAEpD,IAAI,KAAK,MAAM,GAAG,YAAY,GAAG;cAAkB;gBAAAuD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClF,CAAC,eACNrE,OAAA;cAAM+D,SAAS,EAAE,eAAepD,IAAI,KAAK,MAAM,GAAG,YAAY,GAAG,+DAA+D,EAAG;cAAAqD,QAAA,GAAC,YAAU,EAAClD,IAAI,CAACuF,IAAI;YAAA;cAAAnC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7J,CACN,eAEDrE,OAAA;YAAAgE,QAAA,EACGrD,IAAI,KAAK,MAAM,GACd,CAACQ,SAAS,iBACRnB,OAAA;cAAK+D,SAAS,EAAC,iBAAiB;cAAAC,QAAA,eAC9BhE,OAAA,CAACJ,aAAa;gBAAC0G,aAAa,EAAE,CAACzG,SAAS,CAAE;gBAAAmE,QAAA,EACvCpD,OAAO,IAAI;cAAE;gBAAAsD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACD;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACb,CACN,gBAEDrE,OAAA;cACE+D,SAAS,EAAC,wOAAwO;cAClPqB,KAAK,EAAE;gBAAEmB,UAAU,EAAE,MAAM;gBAAEC,gBAAgB,EAAE,MAAM;gBAAEC,UAAU,EAAE;cAAM,CAAE;cAAAzC,QAAA,eAE3EhE,OAAA,CAACJ,aAAa;gBAAC0G,aAAa,EAAE,CAACzG,SAAS,CAAE;gBAAAmE,QAAA,EACvCjC,WAAW,IAAI;cAAE;gBAAAmC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACb;UACN;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,EAGLxD,QAAQ,IAAIiD,cAAc,CAACjD,QAAQ,CAAC,EAGpCF,IAAI,KAAK,WAAW,IAAI,CAACI,SAAS,IAAI,CAACC,OAAO,IAAI,CAACd,OAAO,CAACwG,WAAW,iBACrE1G,OAAA;YAAK+D,SAAS,EAAC,yBAAyB;YAAAC,QAAA,gBAEtChE,OAAA;cAAK+D,SAAS,EAAC,iBAAiB;cAAAC,QAAA,gBAC9BhE,OAAA;gBACE+D,SAAS,EAAE,yIACTxC,QAAQ,KAAK,OAAO,GAChB,sEAAsE,GACtE,yIAAyI,EAC5I;gBACHoE,OAAO,EAAEA,CAAA,KAAMhD,cAAc,CAAC,OAAO,CAAE;gBACvCgE,QAAQ,EAAElF,oBAAqB;gBAC/B2E,KAAK,EAAC,eAAe;gBACrB,cAAW,oBAAoB;gBAAApC,QAAA,eAE/BhE,OAAA,CAACN,QAAQ;kBAAC8E,IAAI,EAAE;gBAAG;kBAAAN,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChB,CAAC,eACTrE,OAAA;gBACE+D,SAAS,EAAE,yIACTxC,QAAQ,KAAK,UAAU,GACnB,8DAA8D,GAC9D,yIAAyI,EAC5I;gBACHoE,OAAO,EAAEA,CAAA,KAAMhD,cAAc,CAAC,UAAU,CAAE;gBAC1CgE,QAAQ,EAAElF,oBAAqB;gBAC/B2E,KAAK,EAAC,eAAe;gBACrB,cAAW,uBAAuB;gBAAApC,QAAA,eAElChE,OAAA,CAACL,UAAU;kBAAC6E,IAAI,EAAE;gBAAG;kBAAAN,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClB,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,eAENrE,OAAA;cACE+D,SAAS,EAAC,6MAA6M;cACvN4B,OAAO,EAAErD,UAAW;cACpB8D,KAAK,EAAEnF,MAAM,GAAG,SAAS,GAAG,MAAO;cACnC,cAAW,cAAc;cAAA+C,QAAA,EAExB/C,MAAM,gBAAGjB,OAAA,CAACX,KAAK;gBAACmF,IAAI,EAAE,EAAG;gBAACT,SAAS,EAAC;cAAiB;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,gBAAGrE,OAAA,CAACZ,IAAI;gBAACoF,IAAI,EAAE,EAAG;gBAACT,SAAS,EAAC;cAAmE;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtJ,CAAC,EAERlE,MAAM,IAAIC,YAAY,iBACrBJ,OAAA;cACE+D,SAAS,EAAC,6MAA6M;cACvN4B,OAAO,EAAEvF,YAAa;cACtBgG,KAAK,EAAC,qBAAqB;cAC3B,cAAW,qBAAqB;cAAApC,QAAA,eAEhChE,OAAA,CAACV,SAAS;gBAACkF,IAAI,EAAE,EAAG;gBAACT,SAAS,EAAC;cAAmE;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/F,CACT,EAEAhE,OAAO,iBACNL,OAAA;cACE+D,SAAS,EAAC,6MAA6M;cACvN4B,OAAO,EAAEA,CAAA,KAAMtF,OAAO,CAACH,OAAO,CAAE;cAChCkG,KAAK,EAAC,oBAAoB;cAC1B,cAAW,oBAAoB;cAAApC,QAAA,eAE/BhE,OAAA,CAACT,MAAM;gBAACiF,IAAI,EAAE,EAAG;gBAACT,SAAS,EAAC;cAAmE;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5F,CACT,EAEA/D,QAAQ,iBACPN,OAAA;cACE+D,SAAS,EAAC,6MAA6M;cACvN4B,OAAO,EAAEA,CAAA,KAAMrF,QAAQ,CAAC,UAAU,CAAE;cACpC8F,KAAK,EAAC,qBAAqB;cAC3B,cAAW,qBAAqB;cAAApC,QAAA,eAEhChE,OAAA,CAACR,QAAQ;gBAACgF,IAAI,EAAE,EAAG;gBAACT,SAAS,EAAC;cAAmE;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC9F,CACT;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACI;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACJ,EAGA1D,IAAI,KAAK,MAAM,IAAI,CAACQ,SAAS,iBAC5BnB,OAAA;MAAK+D,SAAS,EAAC,wCAAwC;MAAAC,QAAA,gBACrDhE,OAAA;QACE+D,SAAS,EAAC,6MAA6M;QACvN4B,OAAO,EAAErD,UAAW;QACpB8D,KAAK,EAAEnF,MAAM,GAAG,SAAS,GAAG,MAAO;QACnC,cAAW,cAAc;QAAA+C,QAAA,EAExB/C,MAAM,gBAAGjB,OAAA,CAACX,KAAK;UAACmF,IAAI,EAAE,EAAG;UAACT,SAAS,EAAC;QAAiB;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,gBAAGrE,OAAA,CAACZ,IAAI;UAACoF,IAAI,EAAE,EAAG;UAACT,SAAS,EAAC;QAAmE;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtJ,CAAC,EACR7D,iBAAiB,iBAChBR,OAAA;QACE+D,SAAS,EAAC,6MAA6M;QACvN4B,OAAO,EAAEhB,SAAU;QACnByB,KAAK,EAAC,cAAc;QACpB,cAAW,cAAc;QAAApC,QAAA,eAEzBhE,OAAA,CAACP,MAAM;UAAC+E,IAAI,EAAE,EAAG;UAACT,SAAS,EAAC;QAAmE;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5F,CACT;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAC3D,EAAA,CA/WIT,aAA2C;AAAA2G,EAAA,GAA3C3G,aAA2C;AAiXjD,eAAeA,aAAa;AAAC,IAAA2G,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}