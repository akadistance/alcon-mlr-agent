{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\josep\\\\OneDrive\\\\Documents\\\\Jason\\\\EyeQ MLR Agent\\\\alcon-mlr-agent\\\\web-interface\\\\src\\\\components\\\\ParticleBackground.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Simple noise function for organic movement (simplified Perlin-like)\nconst noise = (x, y, time, frequency) => {\n  const n = Math.sin(x * frequency + time * frequency * 0.05) + Math.cos(y * frequency + time * frequency * 0.05);\n  return (n + 2) / 4; // Normalize to 0-1\n};\nconst ParticleBackground = ({\n  hideWhenChatting = false\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const animationFrameRef = useRef();\n  const particlesRef = useRef([]);\n  const [isIdle, setIsIdle] = useState(false);\n  const idleTimerRef = useRef();\n  const timeRef = useRef(0);\n  const observerRef = useRef(null);\n  const [isDarkMode, setIsDarkMode] = useState(() => document.documentElement.classList.contains('dark'));\n\n  // Grok-style particle configuration - reduced count and more spread\n  const getParticleCount = () => {\n    const area = window.innerWidth * window.innerHeight;\n    const density = isIdle ? 0.15 : 0.08; // Much lower density - more spread out\n    return Math.min(Math.max(Math.floor(area / 10000 * density), 100), 400);\n  };\n  const IDLE_THRESHOLD = 3000; // 3 seconds\n  const FADE_IN_SPEED = 0.015; // Smooth fade in over ~2 seconds\n  const FADE_OUT_SPEED = 0.05;\n  const MIN_OPACITY = 0.4;\n  const MAX_OPACITY = 1.0;\n  const MIN_SIZE = 0.5; // Increased for star-like appearance\n  const MAX_SIZE = 2.5; // Increased for star-like appearance\n  const MIN_SPEED = 0.05; // Much slower\n  const MAX_SPEED = 0.15; // Much slower\n  const DAMPING = 0.98; // Gradual slowdown\n  const NOISE_AMPLITUDE = 0.1; // Reduced noise for slower movement\n  const NOISE_FREQUENCY = 0.005;\n  const LIFESPAN_MIN = 10000; // 10 seconds\n  const LIFESPAN_MAX = 30000; // 30 seconds\n  const TWINKLE_SPEED = 0.15; // Faster twinkling for star effect\n  const STAR_SHINE_INTENSITY = 0.8; // Intensity of star shine effect\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Set canvas size\n    const resizeCanvas = () => {\n      canvas.width = window.innerWidth;\n      canvas.height = window.innerHeight;\n\n      // Adjust particle count based on new size\n      const targetCount = getParticleCount();\n      const currentCount = particlesRef.current.length;\n      if (targetCount > currentCount) {\n        // Add particles\n        for (let i = currentCount; i < targetCount; i++) {\n          particlesRef.current.push(createParticle(canvas.width, canvas.height));\n        }\n      } else if (targetCount < currentCount) {\n        // Remove excess particles\n        particlesRef.current = particlesRef.current.slice(0, targetCount);\n      }\n    };\n    const createParticle = (width, height) => {\n      // Spawn from bottom right but spread more across the screen\n      // Use a wider spawn area for better distribution\n      const spawnX = width * 0.5 + (Math.random() - 0.5) * width * 0.8; // Spread across 80% of width\n      const spawnY = height * 0.5 + (Math.random() - 0.5) * height * 0.8; // Spread across 80% of height\n\n      // Movement direction: upward and leftward\n      const angle = Math.random() * Math.PI * 0.75 + Math.PI * 0.5;\n      const speed = Math.random() * (MAX_SPEED - MIN_SPEED) + MIN_SPEED;\n      return {\n        x: spawnX,\n        y: spawnY,\n        size: Math.random() * (MAX_SIZE - MIN_SIZE) + MIN_SIZE,\n        baseSize: Math.random() * (MAX_SIZE - MIN_SIZE) + MIN_SIZE,\n        speedX: Math.cos(angle) * speed,\n        speedY: Math.sin(angle) * speed,\n        baseSpeedX: Math.cos(angle) * speed,\n        baseSpeedY: Math.sin(angle) * speed,\n        opacity: 0,\n        targetOpacity: Math.random() * (MAX_OPACITY - MIN_OPACITY) + MIN_OPACITY,\n        twinkleSpeed: TWINKLE_SPEED + Math.random() * 0.05,\n        twinklePhase: Math.random() * Math.PI * 2,\n        lifespan: 0,\n        maxLifespan: Math.random() * (LIFESPAN_MAX - LIFESPAN_MIN) + LIFESPAN_MIN,\n        colorIndex: 0,\n        // Always use first (and only) color\n        noiseOffsetX: Math.random() * 1000,\n        noiseOffsetY: Math.random() * 1000\n      };\n    };\n    resizeCanvas();\n    window.addEventListener('resize', resizeCanvas);\n\n    // Initialize particles\n    const initParticles = () => {\n      particlesRef.current = [];\n      const count = getParticleCount();\n      for (let i = 0; i < count; i++) {\n        particlesRef.current.push(createParticle(canvas.width, canvas.height));\n      }\n    };\n    initParticles();\n\n    // Idle detection\n    const handleInteraction = () => {\n      clearTimeout(idleTimerRef.current);\n      setIsIdle(false);\n      idleTimerRef.current = setTimeout(() => {\n        setIsIdle(true);\n      }, IDLE_THRESHOLD);\n    };\n\n    // Initial idle check\n    idleTimerRef.current = setTimeout(() => {\n      setIsIdle(true);\n    }, IDLE_THRESHOLD);\n    window.addEventListener('mousemove', handleInteraction);\n    window.addEventListener('scroll', handleInteraction);\n    window.addEventListener('touchstart', handleInteraction);\n    window.addEventListener('keydown', handleInteraction);\n\n    // Watch for theme changes\n    observerRef.current = new MutationObserver(() => {\n      const darkMode = document.documentElement.classList.contains('dark');\n      if (darkMode !== isDarkMode) {\n        setIsDarkMode(darkMode);\n        // Regenerate particles with new colors\n        const count = getParticleCount();\n        particlesRef.current = [];\n        for (let i = 0; i < count; i++) {\n          particlesRef.current.push(createParticle(canvas.width, canvas.height));\n        }\n      }\n    });\n    observerRef.current.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: ['class']\n    });\n\n    // Animation loop\n    const animate = () => {\n      if (!ctx) return;\n      timeRef.current += 16; // Approximate frame time\n      const currentTime = timeRef.current;\n\n      // Clear canvas\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // Hide particles if chat has started\n      if (hideWhenChatting) {\n        animationFrameRef.current = requestAnimationFrame(animate);\n        return;\n      }\n\n      // Update and draw particles\n      particlesRef.current.forEach((particle, index) => {\n        // Update lifespan\n        particle.lifespan += 16;\n\n        // Respawn if lifespan exceeded\n        if (particle.lifespan > particle.maxLifespan) {\n          const newParticle = createParticle(canvas.width, canvas.height);\n          particlesRef.current[index] = newParticle;\n          return;\n        }\n\n        // Apply noise for organic movement\n        const noiseX = noise(particle.x + particle.noiseOffsetX, particle.y, currentTime, NOISE_FREQUENCY);\n        const noiseY = noise(particle.y + particle.noiseOffsetY, particle.x, currentTime, NOISE_FREQUENCY);\n\n        // Update speed with noise influence\n        const noiseInfluenceX = (noiseX - 0.5) * NOISE_AMPLITUDE;\n        const noiseInfluenceY = (noiseY - 0.5) * NOISE_AMPLITUDE;\n        particle.speedX = particle.baseSpeedX + noiseInfluenceX;\n        particle.speedY = particle.baseSpeedY + noiseInfluenceY;\n\n        // Apply damping for gradual slowdown (more in idle)\n        const dampingFactor = isIdle ? DAMPING : 0.99;\n        particle.speedX *= dampingFactor;\n        particle.speedY *= dampingFactor;\n\n        // Update position\n        particle.x += particle.speedX;\n        particle.y += particle.speedY;\n\n        // Wrap around or respawn from bottom right\n        if (particle.x < 0 || particle.x > canvas.width || particle.y < 0 || particle.y > canvas.height) {\n          const newParticle = createParticle(canvas.width, canvas.height);\n          particlesRef.current[index] = newParticle;\n          return;\n        }\n\n        // Twinkling effect (size and opacity pulse)\n        const twinkle = Math.sin(currentTime * particle.twinkleSpeed * 0.001 + particle.twinklePhase) * 0.3 + 1;\n        particle.size = particle.baseSize * twinkle;\n\n        // Update opacity based on idle state\n        if (isIdle) {\n          // Fade in when idle\n          if (particle.opacity < particle.targetOpacity) {\n            particle.opacity = Math.min(particle.opacity + FADE_IN_SPEED, particle.targetOpacity);\n          }\n        } else {\n          // Fade out when active\n          particle.opacity = Math.max(particle.opacity - FADE_OUT_SPEED, 0);\n        }\n\n        // Draw particle\n        if (particle.opacity > 0) {\n          // Get color based on current theme\n          const themeColors = isDarkMode ? [{\n            r: 255,\n            g: 255,\n            b: 255\n          }] // White for dark mode\n          : [{\n            r: 0,\n            g: 53,\n            b: 149\n          }]; // Alcon blue for light mode\n          const color = themeColors[0]; // Always use first (and only) color\n\n          // Enhanced twinkling with multiple frequencies for star-like effect\n          const fastTwinkle = Math.sin(currentTime * particle.twinkleSpeed * 0.002 + particle.twinklePhase) * 0.3 + 0.7;\n          const slowTwinkle = Math.sin(currentTime * particle.twinkleSpeed * 0.0005 + particle.twinklePhase * 2) * 0.2 + 0.8;\n          const opacityPulse = fastTwinkle * slowTwinkle;\n          const currentOpacity = particle.opacity * opacityPulse;\n\n          // Star shine effect - brighter pulses\n          const shineIntensity = Math.sin(currentTime * particle.twinkleSpeed * 0.003 + particle.twinklePhase * 1.5) * STAR_SHINE_INTENSITY + (1 - STAR_SHINE_INTENSITY);\n\n          // Outer glow - larger and softer for star effect\n          const outerGradient = ctx.createRadialGradient(particle.x, particle.y, 0, particle.x, particle.y, particle.size * 4);\n          outerGradient.addColorStop(0, `rgba(${color.r}, ${color.g}, ${color.b}, ${currentOpacity * shineIntensity * 0.8})`);\n          outerGradient.addColorStop(0.3, `rgba(${color.r}, ${color.g}, ${color.b}, ${currentOpacity * shineIntensity * 0.5})`);\n          outerGradient.addColorStop(0.6, `rgba(${color.r}, ${color.g}, ${color.b}, ${currentOpacity * shineIntensity * 0.2})`);\n          outerGradient.addColorStop(1, `rgba(${color.r}, ${color.g}, ${color.b}, 0)`);\n          ctx.fillStyle = outerGradient;\n          ctx.beginPath();\n          ctx.arc(particle.x, particle.y, particle.size * 4, 0, Math.PI * 2);\n          ctx.fill();\n\n          // Main star body with glow\n          const gradient = ctx.createRadialGradient(particle.x, particle.y, 0, particle.x, particle.y, particle.size * 2.5);\n\n          // Center: very bright for star shine\n          gradient.addColorStop(0, `rgba(${color.r}, ${color.g}, ${color.b}, ${currentOpacity * shineIntensity})`);\n          // Mid: fade\n          gradient.addColorStop(0.4, `rgba(${color.r}, ${color.g}, ${color.b}, ${currentOpacity * shineIntensity * 0.7})`);\n          // Outer: more fade\n          gradient.addColorStop(0.7, `rgba(${color.r}, ${color.g}, ${color.b}, ${currentOpacity * shineIntensity * 0.4})`);\n          gradient.addColorStop(1, `rgba(${color.r}, ${color.g}, ${color.b}, 0)`);\n          ctx.fillStyle = gradient;\n          ctx.beginPath();\n          ctx.arc(particle.x, particle.y, particle.size * 1.5, 0, Math.PI * 2);\n          ctx.fill();\n\n          // Bright center core - star point\n          ctx.beginPath();\n          ctx.arc(particle.x, particle.y, particle.size * 0.4, 0, Math.PI * 2);\n          ctx.fillStyle = `rgba(${color.r}, ${color.g}, ${color.b}, ${currentOpacity * shineIntensity})`;\n          ctx.fill();\n\n          // Add sparkle effect - occasional bright flashes\n          if (Math.random() < 0.1) {\n            ctx.beginPath();\n            ctx.arc(particle.x, particle.y, particle.size * 0.2, 0, Math.PI * 2);\n            ctx.fillStyle = `rgba(255, 255, 255, ${currentOpacity * shineIntensity * 0.9})`;\n            ctx.fill();\n          }\n        }\n      });\n      animationFrameRef.current = requestAnimationFrame(animate);\n    };\n    animate();\n\n    // Cleanup\n    return () => {\n      window.removeEventListener('resize', resizeCanvas);\n      window.removeEventListener('mousemove', handleInteraction);\n      window.removeEventListener('scroll', handleInteraction);\n      window.removeEventListener('touchstart', handleInteraction);\n      window.removeEventListener('keydown', handleInteraction);\n      if (observerRef.current) {\n        observerRef.current.disconnect();\n      }\n      clearTimeout(idleTimerRef.current);\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, [isIdle, isDarkMode, hideWhenChatting]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    className: `absolute inset-0 pointer-events-none z-0 ${hideWhenChatting ? 'opacity-0' : 'opacity-100'} transition-opacity duration-500`,\n    style: {\n      background: 'transparent'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 353,\n    columnNumber: 5\n  }, this);\n};\n_s(ParticleBackground, \"hsbUz51r7QvCvonMr3pdIZNXk5U=\");\n_c = ParticleBackground;\nexport default ParticleBackground;\nvar _c;\n$RefreshReg$(_c, \"ParticleBackground\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","noise","x","y","time","frequency","n","Math","sin","cos","ParticleBackground","hideWhenChatting","_s","canvasRef","animationFrameRef","particlesRef","isIdle","setIsIdle","idleTimerRef","timeRef","observerRef","isDarkMode","setIsDarkMode","document","documentElement","classList","contains","getParticleCount","area","window","innerWidth","innerHeight","density","min","max","floor","IDLE_THRESHOLD","FADE_IN_SPEED","FADE_OUT_SPEED","MIN_OPACITY","MAX_OPACITY","MIN_SIZE","MAX_SIZE","MIN_SPEED","MAX_SPEED","DAMPING","NOISE_AMPLITUDE","NOISE_FREQUENCY","LIFESPAN_MIN","LIFESPAN_MAX","TWINKLE_SPEED","STAR_SHINE_INTENSITY","canvas","current","ctx","getContext","resizeCanvas","width","height","targetCount","currentCount","length","i","push","createParticle","slice","spawnX","random","spawnY","angle","PI","speed","size","baseSize","speedX","speedY","baseSpeedX","baseSpeedY","opacity","targetOpacity","twinkleSpeed","twinklePhase","lifespan","maxLifespan","colorIndex","noiseOffsetX","noiseOffsetY","addEventListener","initParticles","count","handleInteraction","clearTimeout","setTimeout","MutationObserver","darkMode","observe","attributes","attributeFilter","animate","currentTime","clearRect","requestAnimationFrame","forEach","particle","index","newParticle","noiseX","noiseY","noiseInfluenceX","noiseInfluenceY","dampingFactor","twinkle","themeColors","r","g","b","color","fastTwinkle","slowTwinkle","opacityPulse","currentOpacity","shineIntensity","outerGradient","createRadialGradient","addColorStop","fillStyle","beginPath","arc","fill","gradient","removeEventListener","disconnect","cancelAnimationFrame","ref","className","style","background","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/josep/OneDrive/Documents/Jason/EyeQ MLR Agent/alcon-mlr-agent/web-interface/src/components/ParticleBackground.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\n\r\ninterface Particle {\r\n  x: number;\r\n  y: number;\r\n  size: number;\r\n  baseSize: number;\r\n  speedX: number;\r\n  speedY: number;\r\n  baseSpeedX: number;\r\n  baseSpeedY: number;\r\n  opacity: number;\r\n  targetOpacity: number;\r\n  twinkleSpeed: number;\r\n  twinklePhase: number;\r\n  lifespan: number;\r\n  maxLifespan: number;\r\n  colorIndex: number;\r\n  noiseOffsetX: number;\r\n  noiseOffsetY: number;\r\n}\r\n\r\n// Simple noise function for organic movement (simplified Perlin-like)\r\nconst noise = (x: number, y: number, time: number, frequency: number): number => {\r\n  const n = Math.sin(x * frequency + time * frequency * 0.05) + Math.cos(y * frequency + time * frequency * 0.05);\r\n  return (n + 2) / 4; // Normalize to 0-1\r\n};\r\n\r\ninterface ParticleBackgroundProps {\r\n  hideWhenChatting?: boolean;\r\n}\r\n\r\nconst ParticleBackground: React.FC<ParticleBackgroundProps> = ({ hideWhenChatting = false }) => {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const animationFrameRef = useRef<number>();\r\n  const particlesRef = useRef<Particle[]>([]);\r\n  const [isIdle, setIsIdle] = useState(false);\r\n  const idleTimerRef = useRef<NodeJS.Timeout>();\r\n  const timeRef = useRef<number>(0);\r\n  const observerRef = useRef<MutationObserver | null>(null);\r\n  const [isDarkMode, setIsDarkMode] = useState(() => \r\n    document.documentElement.classList.contains('dark')\r\n  );\r\n\r\n  // Grok-style particle configuration - reduced count and more spread\r\n  const getParticleCount = () => {\r\n    const area = window.innerWidth * window.innerHeight;\r\n    const density = isIdle ? 0.15 : 0.08; // Much lower density - more spread out\r\n    return Math.min(Math.max(Math.floor((area / 10000) * density), 100), 400);\r\n  };\r\n\r\n  const IDLE_THRESHOLD = 3000; // 3 seconds\r\n  const FADE_IN_SPEED = 0.015; // Smooth fade in over ~2 seconds\r\n  const FADE_OUT_SPEED = 0.05;\r\n  const MIN_OPACITY = 0.4;\r\n  const MAX_OPACITY = 1.0;\r\n  const MIN_SIZE = 0.5; // Increased for star-like appearance\r\n  const MAX_SIZE = 2.5; // Increased for star-like appearance\r\n  const MIN_SPEED = 0.05; // Much slower\r\n  const MAX_SPEED = 0.15; // Much slower\r\n  const DAMPING = 0.98; // Gradual slowdown\r\n  const NOISE_AMPLITUDE = 0.1; // Reduced noise for slower movement\r\n  const NOISE_FREQUENCY = 0.005;\r\n  const LIFESPAN_MIN = 10000; // 10 seconds\r\n  const LIFESPAN_MAX = 30000; // 30 seconds\r\n  const TWINKLE_SPEED = 0.15; // Faster twinkling for star effect\r\n  const STAR_SHINE_INTENSITY = 0.8; // Intensity of star shine effect\r\n\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    // Set canvas size\r\n    const resizeCanvas = () => {\r\n      canvas.width = window.innerWidth;\r\n      canvas.height = window.innerHeight;\r\n      \r\n      // Adjust particle count based on new size\r\n      const targetCount = getParticleCount();\r\n      const currentCount = particlesRef.current.length;\r\n      \r\n      if (targetCount > currentCount) {\r\n        // Add particles\r\n        for (let i = currentCount; i < targetCount; i++) {\r\n          particlesRef.current.push(createParticle(canvas.width, canvas.height));\r\n        }\r\n      } else if (targetCount < currentCount) {\r\n        // Remove excess particles\r\n        particlesRef.current = particlesRef.current.slice(0, targetCount);\r\n      }\r\n    };\r\n\r\n    const createParticle = (width: number, height: number): Particle => {\r\n      // Spawn from bottom right but spread more across the screen\r\n      // Use a wider spawn area for better distribution\r\n      const spawnX = width * 0.5 + (Math.random() - 0.5) * width * 0.8; // Spread across 80% of width\r\n      const spawnY = height * 0.5 + (Math.random() - 0.5) * height * 0.8; // Spread across 80% of height\r\n      \r\n      // Movement direction: upward and leftward\r\n      const angle = Math.random() * Math.PI * 0.75 + Math.PI * 0.5;\r\n      const speed = Math.random() * (MAX_SPEED - MIN_SPEED) + MIN_SPEED;\r\n      \r\n      return {\r\n        x: spawnX,\r\n        y: spawnY,\r\n        size: Math.random() * (MAX_SIZE - MIN_SIZE) + MIN_SIZE,\r\n        baseSize: Math.random() * (MAX_SIZE - MIN_SIZE) + MIN_SIZE,\r\n        speedX: Math.cos(angle) * speed,\r\n        speedY: Math.sin(angle) * speed,\r\n        baseSpeedX: Math.cos(angle) * speed,\r\n        baseSpeedY: Math.sin(angle) * speed,\r\n        opacity: 0,\r\n        targetOpacity: Math.random() * (MAX_OPACITY - MIN_OPACITY) + MIN_OPACITY,\r\n        twinkleSpeed: TWINKLE_SPEED + Math.random() * 0.05,\r\n        twinklePhase: Math.random() * Math.PI * 2,\r\n        lifespan: 0,\r\n        maxLifespan: Math.random() * (LIFESPAN_MAX - LIFESPAN_MIN) + LIFESPAN_MIN,\r\n        colorIndex: 0, // Always use first (and only) color\r\n        noiseOffsetX: Math.random() * 1000,\r\n        noiseOffsetY: Math.random() * 1000,\r\n      };\r\n    };\r\n\r\n    resizeCanvas();\r\n    window.addEventListener('resize', resizeCanvas);\r\n\r\n    // Initialize particles\r\n    const initParticles = () => {\r\n      particlesRef.current = [];\r\n      const count = getParticleCount();\r\n      for (let i = 0; i < count; i++) {\r\n        particlesRef.current.push(createParticle(canvas.width, canvas.height));\r\n      }\r\n    };\r\n\r\n    initParticles();\r\n\r\n    // Idle detection\r\n    const handleInteraction = () => {\r\n      clearTimeout(idleTimerRef.current);\r\n      setIsIdle(false);\r\n\r\n      idleTimerRef.current = setTimeout(() => {\r\n        setIsIdle(true);\r\n      }, IDLE_THRESHOLD);\r\n    };\r\n\r\n    // Initial idle check\r\n    idleTimerRef.current = setTimeout(() => {\r\n      setIsIdle(true);\r\n    }, IDLE_THRESHOLD);\r\n\r\n    window.addEventListener('mousemove', handleInteraction);\r\n    window.addEventListener('scroll', handleInteraction);\r\n    window.addEventListener('touchstart', handleInteraction);\r\n    window.addEventListener('keydown', handleInteraction);\r\n\r\n    // Watch for theme changes\r\n    observerRef.current = new MutationObserver(() => {\r\n      const darkMode = document.documentElement.classList.contains('dark');\r\n      if (darkMode !== isDarkMode) {\r\n        setIsDarkMode(darkMode);\r\n        // Regenerate particles with new colors\r\n        const count = getParticleCount();\r\n        particlesRef.current = [];\r\n        for (let i = 0; i < count; i++) {\r\n          particlesRef.current.push(createParticle(canvas.width, canvas.height));\r\n        }\r\n      }\r\n    });\r\n\r\n    observerRef.current.observe(document.documentElement, {\r\n      attributes: true,\r\n      attributeFilter: ['class'],\r\n    });\r\n\r\n    // Animation loop\r\n    const animate = () => {\r\n      if (!ctx) return;\r\n\r\n      timeRef.current += 16; // Approximate frame time\r\n      const currentTime = timeRef.current;\r\n\r\n      // Clear canvas\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n      // Hide particles if chat has started\r\n      if (hideWhenChatting) {\r\n        animationFrameRef.current = requestAnimationFrame(animate);\r\n        return;\r\n      }\r\n\r\n      // Update and draw particles\r\n      particlesRef.current.forEach((particle, index) => {\r\n        // Update lifespan\r\n        particle.lifespan += 16;\r\n        \r\n        // Respawn if lifespan exceeded\r\n        if (particle.lifespan > particle.maxLifespan) {\r\n          const newParticle = createParticle(canvas.width, canvas.height);\r\n          particlesRef.current[index] = newParticle;\r\n          return;\r\n        }\r\n\r\n        // Apply noise for organic movement\r\n        const noiseX = noise(particle.x + particle.noiseOffsetX, particle.y, currentTime, NOISE_FREQUENCY);\r\n        const noiseY = noise(particle.y + particle.noiseOffsetY, particle.x, currentTime, NOISE_FREQUENCY);\r\n        \r\n        // Update speed with noise influence\r\n        const noiseInfluenceX = (noiseX - 0.5) * NOISE_AMPLITUDE;\r\n        const noiseInfluenceY = (noiseY - 0.5) * NOISE_AMPLITUDE;\r\n        \r\n        particle.speedX = particle.baseSpeedX + noiseInfluenceX;\r\n        particle.speedY = particle.baseSpeedY + noiseInfluenceY;\r\n        \r\n        // Apply damping for gradual slowdown (more in idle)\r\n        const dampingFactor = isIdle ? DAMPING : 0.99;\r\n        particle.speedX *= dampingFactor;\r\n        particle.speedY *= dampingFactor;\r\n\r\n        // Update position\r\n        particle.x += particle.speedX;\r\n        particle.y += particle.speedY;\r\n\r\n        // Wrap around or respawn from bottom right\r\n        if (particle.x < 0 || particle.x > canvas.width || particle.y < 0 || particle.y > canvas.height) {\r\n          const newParticle = createParticle(canvas.width, canvas.height);\r\n          particlesRef.current[index] = newParticle;\r\n          return;\r\n        }\r\n\r\n        // Twinkling effect (size and opacity pulse)\r\n        const twinkle = Math.sin(currentTime * particle.twinkleSpeed * 0.001 + particle.twinklePhase) * 0.3 + 1;\r\n        particle.size = particle.baseSize * twinkle;\r\n\r\n        // Update opacity based on idle state\r\n        if (isIdle) {\r\n          // Fade in when idle\r\n          if (particle.opacity < particle.targetOpacity) {\r\n            particle.opacity = Math.min(\r\n              particle.opacity + FADE_IN_SPEED,\r\n              particle.targetOpacity\r\n            );\r\n          }\r\n        } else {\r\n          // Fade out when active\r\n          particle.opacity = Math.max(particle.opacity - FADE_OUT_SPEED, 0);\r\n        }\r\n\r\n        // Draw particle\r\n        if (particle.opacity > 0) {\r\n          // Get color based on current theme\r\n          const themeColors = isDarkMode \r\n            ? [{ r: 255, g: 255, b: 255 }] // White for dark mode\r\n            : [{ r: 0, g: 53, b: 149 }]; // Alcon blue for light mode\r\n          const color = themeColors[0]; // Always use first (and only) color\r\n          \r\n          // Enhanced twinkling with multiple frequencies for star-like effect\r\n          const fastTwinkle = Math.sin(currentTime * particle.twinkleSpeed * 0.002 + particle.twinklePhase) * 0.3 + 0.7;\r\n          const slowTwinkle = Math.sin(currentTime * particle.twinkleSpeed * 0.0005 + particle.twinklePhase * 2) * 0.2 + 0.8;\r\n          const opacityPulse = fastTwinkle * slowTwinkle;\r\n          const currentOpacity = particle.opacity * opacityPulse;\r\n          \r\n          // Star shine effect - brighter pulses\r\n          const shineIntensity = Math.sin(currentTime * particle.twinkleSpeed * 0.003 + particle.twinklePhase * 1.5) * STAR_SHINE_INTENSITY + (1 - STAR_SHINE_INTENSITY);\r\n          \r\n          // Outer glow - larger and softer for star effect\r\n          const outerGradient = ctx.createRadialGradient(\r\n            particle.x,\r\n            particle.y,\r\n            0,\r\n            particle.x,\r\n            particle.y,\r\n            particle.size * 4\r\n          );\r\n          \r\n          outerGradient.addColorStop(0, `rgba(${color.r}, ${color.g}, ${color.b}, ${currentOpacity * shineIntensity * 0.8})`);\r\n          outerGradient.addColorStop(0.3, `rgba(${color.r}, ${color.g}, ${color.b}, ${currentOpacity * shineIntensity * 0.5})`);\r\n          outerGradient.addColorStop(0.6, `rgba(${color.r}, ${color.g}, ${color.b}, ${currentOpacity * shineIntensity * 0.2})`);\r\n          outerGradient.addColorStop(1, `rgba(${color.r}, ${color.g}, ${color.b}, 0)`);\r\n          \r\n          ctx.fillStyle = outerGradient;\r\n          ctx.beginPath();\r\n          ctx.arc(particle.x, particle.y, particle.size * 4, 0, Math.PI * 2);\r\n          ctx.fill();\r\n          \r\n          // Main star body with glow\r\n          const gradient = ctx.createRadialGradient(\r\n            particle.x,\r\n            particle.y,\r\n            0,\r\n            particle.x,\r\n            particle.y,\r\n            particle.size * 2.5\r\n          );\r\n          \r\n          // Center: very bright for star shine\r\n          gradient.addColorStop(0, `rgba(${color.r}, ${color.g}, ${color.b}, ${currentOpacity * shineIntensity})`);\r\n          // Mid: fade\r\n          gradient.addColorStop(0.4, `rgba(${color.r}, ${color.g}, ${color.b}, ${currentOpacity * shineIntensity * 0.7})`);\r\n          // Outer: more fade\r\n          gradient.addColorStop(0.7, `rgba(${color.r}, ${color.g}, ${color.b}, ${currentOpacity * shineIntensity * 0.4})`);\r\n          gradient.addColorStop(1, `rgba(${color.r}, ${color.g}, ${color.b}, 0)`);\r\n          \r\n          ctx.fillStyle = gradient;\r\n          ctx.beginPath();\r\n          ctx.arc(particle.x, particle.y, particle.size * 1.5, 0, Math.PI * 2);\r\n          ctx.fill();\r\n\r\n          // Bright center core - star point\r\n          ctx.beginPath();\r\n          ctx.arc(particle.x, particle.y, particle.size * 0.4, 0, Math.PI * 2);\r\n          ctx.fillStyle = `rgba(${color.r}, ${color.g}, ${color.b}, ${currentOpacity * shineIntensity})`;\r\n          ctx.fill();\r\n          \r\n          // Add sparkle effect - occasional bright flashes\r\n          if (Math.random() < 0.1) {\r\n            ctx.beginPath();\r\n            ctx.arc(particle.x, particle.y, particle.size * 0.2, 0, Math.PI * 2);\r\n            ctx.fillStyle = `rgba(255, 255, 255, ${currentOpacity * shineIntensity * 0.9})`;\r\n            ctx.fill();\r\n          }\r\n        }\r\n      });\r\n\r\n      animationFrameRef.current = requestAnimationFrame(animate);\r\n    };\r\n\r\n    animate();\r\n\r\n    // Cleanup\r\n    return () => {\r\n      window.removeEventListener('resize', resizeCanvas);\r\n      window.removeEventListener('mousemove', handleInteraction);\r\n      window.removeEventListener('scroll', handleInteraction);\r\n      window.removeEventListener('touchstart', handleInteraction);\r\n      window.removeEventListener('keydown', handleInteraction);\r\n      if (observerRef.current) {\r\n        observerRef.current.disconnect();\r\n      }\r\n      clearTimeout(idleTimerRef.current);\r\n      if (animationFrameRef.current) {\r\n        cancelAnimationFrame(animationFrameRef.current);\r\n      }\r\n    };\r\n  }, [isIdle, isDarkMode, hideWhenChatting]);\r\n\r\n  return (\r\n    <canvas\r\n      ref={canvasRef}\r\n      className={`absolute inset-0 pointer-events-none z-0 ${hideWhenChatting ? 'opacity-0' : 'opacity-100'} transition-opacity duration-500`}\r\n      style={{ background: 'transparent' }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ParticleBackground;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}