{"ast":null,"code":"/**\r\n * OpenAI Apps SDK API Types and Implementation\r\n * Based on ChatGPT UI component patterns\r\n */\n\n// Type definitions for window.openai API\n\n// Event type for global updates\nexport const SET_GLOBALS_EVENT_TYPE = \"openai:set_globals\";\nexport class SetGlobalsEvent extends CustomEvent {\n  constructor(globals) {\n    super(SET_GLOBALS_EVENT_TYPE, {\n      detail: {\n        globals\n      },\n      bubbles: true\n    });\n    this.type = SET_GLOBALS_EVENT_TYPE;\n  }\n}\n\n// Global type augmentation\n\n/**\r\n * Initialize or update window.openai API\r\n * This creates a mock implementation for standalone use\r\n */\nexport function initializeOpenAiAPI(initialGlobals) {\n  // Detect device type\n  const getDeviceType = () => {\n    const width = window.innerWidth;\n    if (width < 768) return \"mobile\";\n    if (width < 1024) return \"tablet\";\n    if (width >= 1024) return \"desktop\";\n    return \"unknown\";\n  };\n\n  // Detect theme from system preference or localStorage\n  const getTheme = () => {\n    if (typeof window !== \"undefined\") {\n      const saved = localStorage.getItem(\"theme\");\n      if (saved === \"dark\" || saved === \"light\") return saved;\n      if (window.matchMedia(\"(prefers-color-scheme: dark)\").matches) {\n        return \"dark\";\n      }\n    }\n    return \"light\";\n  };\n\n  // Default globals\n  const defaultGlobals = {\n    theme: getTheme(),\n    userAgent: {\n      device: {\n        type: getDeviceType()\n      },\n      capabilities: {\n        hover: window.matchMedia(\"(hover: hover)\").matches,\n        touch: \"ontouchstart\" in window || navigator.maxTouchPoints > 0\n      }\n    },\n    locale: navigator.language || \"en-US\",\n    maxHeight: window.innerHeight,\n    displayMode: \"inline\",\n    safeArea: {\n      insets: {\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0\n      }\n    },\n    toolInput: {},\n    toolOutput: null,\n    toolResponseMetadata: null,\n    widgetState: null,\n    ...initialGlobals\n  };\n\n  // API implementation\n  const api = {\n    callTool: async (name, args) => {\n      try {\n        const response = await fetch(`/api/${name}`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(args)\n        });\n        if (!response.ok) {\n          throw new Error(`Tool call failed: ${response.statusText}`);\n        }\n        const data = await response.json();\n        return {\n          content: data,\n          isError: false,\n          metadata: data.metadata || {}\n        };\n      } catch (error) {\n        return {\n          content: null,\n          isError: true,\n          metadata: {\n            error: error instanceof Error ? error.message : \"Unknown error\"\n          }\n        };\n      }\n    },\n    requestClose: () => {\n      // Dispatch custom event for widget to handle\n      window.dispatchEvent(new CustomEvent(\"openai:request_close\", {\n        bubbles: true\n      }));\n    },\n    sendFollowUpMessage: async ({\n      prompt\n    }) => {\n      // Dispatch custom event for chat interface to handle\n      window.dispatchEvent(new CustomEvent(\"openai:follow_up\", {\n        bubbles: true,\n        detail: {\n          prompt\n        }\n      }));\n    },\n    openExternal: ({\n      href\n    }) => {\n      window.open(href, \"_blank\", \"noopener,noreferrer\");\n    },\n    requestDisplayMode: async ({\n      mode\n    }) => {\n      // Update display mode and notify\n      const currentGlobals = window.openai || defaultGlobals;\n      const updatedGlobals = {\n        ...currentGlobals,\n        displayMode: mode\n      };\n\n      // Update window.openai\n      Object.assign(window.openai, updatedGlobals);\n\n      // Dispatch event\n      window.dispatchEvent(new SetGlobalsEvent(updatedGlobals));\n      return {\n        mode\n      };\n    },\n    setWidgetState: async state => {\n      const currentGlobals = window.openai || defaultGlobals;\n      const updatedGlobals = {\n        ...currentGlobals,\n        widgetState: state\n      };\n\n      // Update window.openai\n      Object.assign(window.openai, updatedGlobals);\n\n      // Dispatch event\n      window.dispatchEvent(new SetGlobalsEvent(updatedGlobals));\n    }\n  };\n\n  // Merge API and globals\n  const openaiWindow = {\n    ...api,\n    ...defaultGlobals\n  };\n\n  // Set on window\n  window.openai = openaiWindow;\n\n  // Listen for theme changes\n  if (typeof window !== \"undefined\") {\n    const mediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n    const handleThemeChange = () => {\n      const theme = mediaQuery.matches ? \"dark\" : \"light\";\n      updateGlobals({\n        theme\n      });\n    };\n    mediaQuery.addEventListener(\"change\", handleThemeChange);\n\n    // Listen for resize to update maxHeight and device type\n    const handleResize = () => {\n      updateGlobals({\n        maxHeight: window.innerHeight,\n        userAgent: {\n          device: {\n            type: getDeviceType()\n          },\n          capabilities: openaiWindow.userAgent.capabilities\n        }\n      });\n    };\n    window.addEventListener(\"resize\", handleResize);\n  }\n}\n\n/**\r\n * Update globals and dispatch event\r\n */\nexport function updateGlobals(globals) {\n  if (!window.openai) {\n    initializeOpenAiAPI(globals);\n    return;\n  }\n\n  // Update window.openai\n  Object.assign(window.openai, globals);\n\n  // Dispatch event\n  window.dispatchEvent(new SetGlobalsEvent(globals));\n}\n\n/**\r\n * Set tool input/output (typically called when widget receives new data)\r\n */\nexport function setToolData(toolInput, toolOutput, metadata) {\n  updateGlobals({\n    toolInput,\n    toolOutput,\n    toolResponseMetadata: metadata || null\n  });\n}","map":{"version":3,"names":["SET_GLOBALS_EVENT_TYPE","SetGlobalsEvent","CustomEvent","constructor","globals","detail","bubbles","type","initializeOpenAiAPI","initialGlobals","getDeviceType","width","window","innerWidth","getTheme","saved","localStorage","getItem","matchMedia","matches","defaultGlobals","theme","userAgent","device","capabilities","hover","touch","navigator","maxTouchPoints","locale","language","maxHeight","innerHeight","displayMode","safeArea","insets","top","bottom","left","right","toolInput","toolOutput","toolResponseMetadata","widgetState","api","callTool","name","args","response","fetch","method","headers","body","JSON","stringify","ok","Error","statusText","data","json","content","isError","metadata","error","message","requestClose","dispatchEvent","sendFollowUpMessage","prompt","openExternal","href","open","requestDisplayMode","mode","currentGlobals","openai","updatedGlobals","Object","assign","setWidgetState","state","openaiWindow","mediaQuery","handleThemeChange","updateGlobals","addEventListener","handleResize","setToolData"],"sources":["C:/Users/josep/OneDrive/Documents/Jason/EyeQ MLR Agent/alcon-mlr-agent/web-interface/src/lib/openai-api.ts"],"sourcesContent":["/**\r\n * OpenAI Apps SDK API Types and Implementation\r\n * Based on ChatGPT UI component patterns\r\n */\r\n\r\n// Type definitions for window.openai API\r\n\r\nexport type DisplayMode = \"pip\" | \"inline\" | \"fullscreen\";\r\nexport type Theme = \"light\" | \"dark\";\r\nexport type DeviceType = \"mobile\" | \"tablet\" | \"desktop\" | \"unknown\";\r\n\r\nexport interface SafeAreaInsets {\r\n  top: number;\r\n  bottom: number;\r\n  left: number;\r\n  right: number;\r\n}\r\n\r\nexport interface SafeArea {\r\n  insets: SafeAreaInsets;\r\n}\r\n\r\nexport interface UserAgent {\r\n  device: { type: DeviceType };\r\n  capabilities: {\r\n    hover: boolean;\r\n    touch: boolean;\r\n  };\r\n}\r\n\r\nexport interface UnknownObject {\r\n  [key: string]: unknown;\r\n}\r\n\r\nexport interface CallToolResponse {\r\n  content: unknown;\r\n  isError?: boolean;\r\n  metadata?: UnknownObject;\r\n}\r\n\r\nexport interface ToolResponseMetadata extends UnknownObject {\r\n  \"openai/closeWidget\"?: boolean;\r\n  \"openai/widgetDomain\"?: string;\r\n  \"openai/widgetCSP\"?: {\r\n    connect_domains?: string[];\r\n    resource_domains?: string[];\r\n  };\r\n  \"openai/widgetSessionId\"?: string;\r\n}\r\n\r\nexport type OpenAiGlobals<\r\n  ToolInput extends UnknownObject = UnknownObject,\r\n  ToolOutput extends UnknownObject = UnknownObject,\r\n  ToolResponseMetadata extends UnknownObject = UnknownObject,\r\n  WidgetState extends UnknownObject = UnknownObject\r\n> = {\r\n  theme: Theme;\r\n  userAgent: UserAgent;\r\n  locale: string;\r\n  maxHeight: number;\r\n  displayMode: DisplayMode;\r\n  safeArea: SafeArea;\r\n  toolInput: ToolInput;\r\n  toolOutput: ToolOutput | null;\r\n  toolResponseMetadata: ToolResponseMetadata | null;\r\n  widgetState: WidgetState | null;\r\n};\r\n\r\nexport interface OpenAiAPI<WidgetState extends UnknownObject = UnknownObject> {\r\n  /** Calls a tool on your backend. Returns the full response. */\r\n  callTool: (\r\n    name: string,\r\n    args: Record<string, unknown>\r\n  ) => Promise<CallToolResponse>;\r\n\r\n  /** Ask the host to close the widget container */\r\n  requestClose: () => void;\r\n\r\n  /** Triggers a followup turn in the conversation */\r\n  sendFollowUpMessage: (args: { prompt: string }) => Promise<void>;\r\n\r\n  /** Opens an external link, redirects web page or mobile app */\r\n  openExternal: (payload: { href: string }) => void;\r\n\r\n  /** For transitioning an app from inline to fullscreen or pip */\r\n  requestDisplayMode: (args: { mode: DisplayMode }) => Promise<{\r\n    mode: DisplayMode;\r\n  }>;\r\n\r\n  setWidgetState: (state: WidgetState) => Promise<void>;\r\n}\r\n\r\nexport type OpenAiWindow = OpenAiAPI & OpenAiGlobals;\r\n\r\n// Event type for global updates\r\nexport const SET_GLOBALS_EVENT_TYPE = \"openai:set_globals\";\r\n\r\nexport class SetGlobalsEvent extends CustomEvent<{\r\n  globals: Partial<OpenAiGlobals>;\r\n}> {\r\n  readonly type = SET_GLOBALS_EVENT_TYPE;\r\n\r\n  constructor(globals: Partial<OpenAiGlobals>) {\r\n    super(SET_GLOBALS_EVENT_TYPE, {\r\n      detail: { globals },\r\n      bubbles: true,\r\n    });\r\n  }\r\n}\r\n\r\n// Global type augmentation\r\ndeclare global {\r\n  interface Window {\r\n    openai: OpenAiWindow;\r\n  }\r\n\r\n  interface WindowEventMap {\r\n    [SET_GLOBALS_EVENT_TYPE]: SetGlobalsEvent;\r\n  }\r\n}\r\n\r\n/**\r\n * Initialize or update window.openai API\r\n * This creates a mock implementation for standalone use\r\n */\r\nexport function initializeOpenAiAPI(\r\n  initialGlobals?: Partial<OpenAiGlobals>\r\n): void {\r\n  // Detect device type\r\n  const getDeviceType = (): DeviceType => {\r\n    const width = window.innerWidth;\r\n    if (width < 768) return \"mobile\";\r\n    if (width < 1024) return \"tablet\";\r\n    if (width >= 1024) return \"desktop\";\r\n    return \"unknown\";\r\n  };\r\n\r\n  // Detect theme from system preference or localStorage\r\n  const getTheme = (): Theme => {\r\n    if (typeof window !== \"undefined\") {\r\n      const saved = localStorage.getItem(\"theme\");\r\n      if (saved === \"dark\" || saved === \"light\") return saved;\r\n      if (window.matchMedia(\"(prefers-color-scheme: dark)\").matches) {\r\n        return \"dark\";\r\n      }\r\n    }\r\n    return \"light\";\r\n  };\r\n\r\n  // Default globals\r\n  const defaultGlobals: OpenAiGlobals = {\r\n    theme: getTheme(),\r\n    userAgent: {\r\n      device: { type: getDeviceType() },\r\n      capabilities: {\r\n        hover: window.matchMedia(\"(hover: hover)\").matches,\r\n        touch: \"ontouchstart\" in window || navigator.maxTouchPoints > 0,\r\n      },\r\n    },\r\n    locale: navigator.language || \"en-US\",\r\n    maxHeight: window.innerHeight,\r\n    displayMode: \"inline\",\r\n    safeArea: {\r\n      insets: { top: 0, bottom: 0, left: 0, right: 0 },\r\n    },\r\n    toolInput: {},\r\n    toolOutput: null,\r\n    toolResponseMetadata: null,\r\n    widgetState: null,\r\n    ...initialGlobals,\r\n  };\r\n\r\n  // API implementation\r\n  const api: OpenAiAPI = {\r\n    callTool: async (name: string, args: Record<string, unknown>) => {\r\n      try {\r\n        const response = await fetch(`/api/${name}`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(args),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Tool call failed: ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        return {\r\n          content: data,\r\n          isError: false,\r\n          metadata: data.metadata || {},\r\n        };\r\n      } catch (error) {\r\n        return {\r\n          content: null,\r\n          isError: true,\r\n          metadata: {\r\n            error: error instanceof Error ? error.message : \"Unknown error\",\r\n          },\r\n        };\r\n      }\r\n    },\r\n\r\n    requestClose: () => {\r\n      // Dispatch custom event for widget to handle\r\n      window.dispatchEvent(\r\n        new CustomEvent(\"openai:request_close\", { bubbles: true })\r\n      );\r\n    },\r\n\r\n    sendFollowUpMessage: async ({ prompt }) => {\r\n      // Dispatch custom event for chat interface to handle\r\n      window.dispatchEvent(\r\n        new CustomEvent(\"openai:follow_up\", {\r\n          bubbles: true,\r\n          detail: { prompt },\r\n        })\r\n      );\r\n    },\r\n\r\n    openExternal: ({ href }) => {\r\n      window.open(href, \"_blank\", \"noopener,noreferrer\");\r\n    },\r\n\r\n    requestDisplayMode: async ({ mode }) => {\r\n      // Update display mode and notify\r\n      const currentGlobals = (window.openai as OpenAiGlobals) || defaultGlobals;\r\n      const updatedGlobals: Partial<OpenAiGlobals> = {\r\n        ...currentGlobals,\r\n        displayMode: mode,\r\n      };\r\n\r\n      // Update window.openai\r\n      Object.assign(window.openai, updatedGlobals);\r\n\r\n      // Dispatch event\r\n      window.dispatchEvent(new SetGlobalsEvent(updatedGlobals));\r\n\r\n      return { mode };\r\n    },\r\n\r\n    setWidgetState: async (state) => {\r\n      const currentGlobals = (window.openai as OpenAiGlobals) || defaultGlobals;\r\n      const updatedGlobals: Partial<OpenAiGlobals> = {\r\n        ...currentGlobals,\r\n        widgetState: state,\r\n      };\r\n\r\n      // Update window.openai\r\n      Object.assign(window.openai, updatedGlobals);\r\n\r\n      // Dispatch event\r\n      window.dispatchEvent(new SetGlobalsEvent(updatedGlobals));\r\n    },\r\n  };\r\n\r\n  // Merge API and globals\r\n  const openaiWindow = {\r\n    ...api,\r\n    ...defaultGlobals,\r\n  } as OpenAiWindow;\r\n\r\n  // Set on window\r\n  window.openai = openaiWindow;\r\n\r\n  // Listen for theme changes\r\n  if (typeof window !== \"undefined\") {\r\n    const mediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\r\n    const handleThemeChange = () => {\r\n      const theme = mediaQuery.matches ? \"dark\" : \"light\";\r\n      updateGlobals({ theme });\r\n    };\r\n\r\n    mediaQuery.addEventListener(\"change\", handleThemeChange);\r\n\r\n    // Listen for resize to update maxHeight and device type\r\n    const handleResize = () => {\r\n      updateGlobals({\r\n        maxHeight: window.innerHeight,\r\n        userAgent: {\r\n          device: { type: getDeviceType() },\r\n          capabilities: openaiWindow.userAgent.capabilities,\r\n        },\r\n      });\r\n    };\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n  }\r\n}\r\n\r\n/**\r\n * Update globals and dispatch event\r\n */\r\nexport function updateGlobals(globals: Partial<OpenAiGlobals>): void {\r\n  if (!window.openai) {\r\n    initializeOpenAiAPI(globals);\r\n    return;\r\n  }\r\n\r\n  // Update window.openai\r\n  Object.assign(window.openai, globals);\r\n\r\n  // Dispatch event\r\n  window.dispatchEvent(new SetGlobalsEvent(globals));\r\n}\r\n\r\n/**\r\n * Set tool input/output (typically called when widget receives new data)\r\n */\r\nexport function setToolData(\r\n  toolInput: UnknownObject,\r\n  toolOutput: UnknownObject | null,\r\n  metadata?: ToolResponseMetadata\r\n): void {\r\n  updateGlobals({\r\n    toolInput,\r\n    toolOutput,\r\n    toolResponseMetadata: metadata || null,\r\n  });\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}